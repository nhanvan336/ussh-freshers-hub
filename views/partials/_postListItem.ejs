<% if(locals.post) { %>
<a href="/forum/post/<%= post._id %>" class="list-group-item list-group-item-action post-item <%= locals.isSticky ? 'sticky-post' : '' %>">
    <div class="d-flex w-100">
        <!-- Author Avatar -->
        <div class="flex-shrink-0 me-3">
            <% const avatarUrl = post.author && post.author.avatar ? post.author.avatar : '/images/default-avatar.png'; %>
            <img src="<%= avatarUrl %>" alt="avatar" class="rounded-circle post-avatar">
        </div>

        <!-- Post Info -->
        <div class="flex-grow-1">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1"><%= post.title || 'Bài viết không có tiêu đề' %></h5>
                <small class="text-muted">
                    <%= post.lastActivity ? new Date(post.lastActivity).toLocaleDateString('vi-VN') : '' %>
                </small>
            </div>
            <p class="mb-1 text-muted small">
                <% if (locals.isSticky) { %>
                    <span class="badge bg-warning text-dark me-2"><i class="fas fa-thumbtack"></i> Ghim</span>
                <% } %>
                <% if(post.category) { %>
                    <span class="badge bg-info-subtle text-info-emphasis me-2"><%= post.category %></span>
                <% } %>
                bởi <strong><%= post.author ? post.author.username : 'Người dùng ẩn danh' %></strong>
            </p>
            
            <!-- Stats -->
            <div class="d-flex gap-3 small text-muted mt-2">
                <span><i class="fas fa-thumbs-up"></i> <%= post.likesCount || 0 %></span>
                <span><i class="fas fa-comment-alt"></i> <%= post.commentsCount || 0 %></span>
                <span><i class="fas fa-eye"></i> <%= post.views || 0 %></span>
            </div>
        </div>
    </div>
</a>
<% } %>

